<!-- Emergency Contact Page -->
<div class="bg-gradient-to-br from-white to-orange-50 p-6 rounded-2xl shadow-xl border border-orange-100 w-full">
  <div class="flex items-center mb-6">
    <div class="bg-orange-100 p-3 rounded-full mr-4">
      <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
      </svg>
    </div>
    <h2 class="text-2xl font-bold text-gray-800">Emergency Contact</h2>
  </div>

  {% if success_message %}
    <div class="mb-6 p-4 bg-green-50 border-l-4 border-green-400 text-green-800 rounded-r-lg shadow-sm">
      <div class="flex items-center">
        <svg class="w-5 h-5 text-green-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span class="font-medium">{{ success_message }}</span>
      </div>
    </div>
  {% endif %}

  <form method="POST" class="space-y-6">
    {% csrf_token %}

    <div>
      <label for="emergency_contact" class="block text-sm font-bold text-gray-700 mb-2">
        Contact Number
      </label>
      <input
          type="text"
          id="emergency_contact"
          name="emergency_contact"
          value="{{ form.emergency_contact.value|default_if_none:'' }}"
          placeholder="Enter emergency contact number"
          class="pl-10 block w-full px-4 py-3 border-2 border-gray-200 rounded-xl shadow-sm
                 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent
                 transition-all duration-300 bg-white"
          pattern="\d{10}"
          maxlength="10"
          title="Please enter exactly 10 digits"
          required
      >
      <p id="contact-error" class="text-sm text-red-600 mt-2 hidden">Invalid Number</p>
      <p class="text-sm text-gray-500 mt-2">
        This number will be contacted in case of emergencies
      </p>
    </div>

    <button
        type="submit"
        class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700
               text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl
               transform hover:-translate-y-1 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-orange-300"
    >
      <span class="flex items-center justify-center">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        Save Emergency Contact
      </span>
    </button>
  </form>

  <div class="mt-6 p-4 bg-orange-50 rounded-lg border border-orange-200">
    <div class="flex items-start">
      <svg class="w-5 h-5 text-orange-500 mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <div>
        <h4 class="font-semibold text-orange-800 mb-1">Safety Tip</h4>
        <p class="text-sm text-orange-700">
          Make sure this number is always active and belongs to someone who can help you in emergencies.
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  const contactInput = document.getElementById('emergency_contact');
  const errorMsg = document.getElementById('contact-error');

  contactInput.addEventListener('input', () => {
    const value = contactInput.value.trim();
    if (/^\d{10}$/.test(value)) {
      errorMsg.classList.add('hidden');
    } else {
      errorMsg.classList.remove('hidden');
    }
  });
</script>
