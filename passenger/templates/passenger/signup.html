{% load static %}

{% block extra_css %}
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts and Icons -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Raleway:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{% static 'passenger/css/global.css' %}">
<link rel="stylesheet" href="{% static 'css/responsive.css' %}">
{% endblock %}

{% block content %}
<section class="min-h-screen bg-gradient-to-br from-white via-slate-100 to-slate-200 flex items-center justify-center px-4 py-12 font-body">
  <div class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl p-8 md:p-10 animate-fade-in">
    <div class="mb-8 text-center">
      <h2 class="text-3xl font-extrabold text-gray-900 font-heading">Create Your Account</h2>
      <p class="text-sm text-gray-500 mt-2">Join Hospione to start your journey</p>
    </div>

    {% if form.errors %}
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-sm">
        <ul class="list-disc list-inside">
          {% for field in form %}
            {% for error in field.errors %}
              <li><strong>{{ field.label }}:</strong> {{ error }}</li>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <form method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% csrf_token %}

      <!-- First Name -->
      <div>
        <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
        <input type="text" id="firstName" name="first_name" placeholder="Enter first name" required
               class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
      </div>

      <!-- Last Name -->
      <div>
        <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
        <input type="text" id="lastName" name="last_name" placeholder="Enter last name" required
               class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
      </div>

      <!-- Email -->
      <div class="md:col-span-2">
        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
        <input type="email" id="email" name="email" placeholder="example@example.com" required
               class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
      </div>

      <!-- Password -->
      <div>
        <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
        <div class="relative">
          <input type="password" id="password" name="password" placeholder="Enter password" required
                 class="mt-1 block w-full px-4 py-3 pr-10 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
          <span class="absolute inset-y-0 right-3 flex items-center text-gray-400 cursor-pointer" onclick="togglePassword('password', 'toggleIcon1')">
            <i class="fas fa-eye" id="toggleIcon1"></i>
          </span>
        </div>
      </div>

      <!-- Confirm Password -->
      <div>
        <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
        <div class="relative">
          <input type="password" id="confirmPassword" name="confirm_password" placeholder="Confirm password" required
                 class="mt-1 block w-full px-4 py-3 pr-10 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
          <span class="absolute inset-y-0 right-3 flex items-center text-gray-400 cursor-pointer" onclick="togglePassword('confirmPassword', 'toggleIcon2')">
            <i class="fas fa-eye" id="toggleIcon2"></i>
          </span>
        </div>
      </div>

      <!-- Phone -->
      <div>
        <label for="phone" class="block text-sm font-medium text-gray-700">Phone</label>
        <input type="text" id="phone" name="phone" placeholder="Enter phone number" required
               class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
      </div>

      <!-- Gender -->
      <div>
        <label for="gender" class="block text-sm font-medium text-gray-700">Gender</label>
        <select id="gender" name="gender" required
                class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
          <option value="" selected disabled>Select gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <!-- Referral Code -->
      <div class="md:col-span-2">
        <label for="referralCode" class="block text-sm font-medium text-gray-700">Referral Code (Optional)</label>
        <input type="text" id="referralCode" name="referral_code" placeholder="Enter referral code"
               class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm font-body">
      </div>

      <!-- Submit Button -->
      <div class="md:col-span-2">
        <button type="submit" class="w-full py-3 btn-primary text-white rounded-xl font-semibold hover:shadow-lg transition transform hover:scale-105 font-body">
          Sign Up
        </button>
      </div>
    </form>

    <!-- Already have account -->
    <p class="text-center text-sm text-gray-500 mt-6 font-body">
      Already have an account?
      <a href="{% url 'login' %}" class="text-teal-600 font-medium hover:underline">Log in</a>
    </p>
  </div>
</section>

<script>
function togglePassword(fieldId, iconId) {
  const input = document.getElementById(fieldId);
  const icon = document.getElementById(iconId);
  if (input.type === "password") {
    input.type = "text";
    icon.classList.remove("fa-eye");
    icon.classList.add("fa-eye-slash");
  } else {
    input.type = "password";
    icon.classList.remove("fa-eye-slash");
    icon.classList.add("fa-eye");
  }
}
</script>
{% endblock %}
